plan_id: B_urgent

# Urgent B plan: Mix(ETTh1+Exchange) pretrain + LP on ETTh1
# - variants: P1~P4
# - patch_len: 16
# - epochs: 10
# - seed: 0

runs:
  # -------------------------
  # Pretrain (Mix, Var-MAE)
  # -------------------------
  - id_template: "B-URG-TR.Mix.{variant}.pl{patch_len}.sd{seed}"
    entry: pretrain
    overrides:
      - data=Mix
      - data.mix.datasets=[ETTh1,Exchange]
      - data.mix.sample_mode=balanced
      - model={variant}
      - model.patch.patch_len={patch_len}
      - model.patch.local_win=2
      - ssl=var_mae
      - ssl.mask_ratio=0.5
      - ssl.pretrain_epochs=10
      - train.patience=0
      - metadata.enabled=false
      - runtime.device=cuda
      - runtime.seed={seed}
      - run.code=B-URG-TR
      - run.hparams_tag=pl{patch_len}
      - run.id={id}
    sweep:
      variant: [P1, P2, P3, P4]
      patch_len: [16]
      seed: [0]

  # -------------------------
  # Downstream LP (ETTh1)
  # -------------------------
  - id_template: "B-URG-DS.ETTh1.{variant}.pl{patch_len}.sd{seed}"
    entry: downstream
    overrides:
      - data=ETTh1
      - model={variant}
      - model.patch.patch_len={patch_len}
      - model.patch.local_win=2
      - train=downstream
      - train.mode=lp
      - train.epochs=10
      - train.batch_size=32
      - optim.lr=0.0001
      - train.ssl_ckpt_path=./artifacts/runs/B-URG-TR.Mix.{variant}.pl{patch_len}.sd{seed}/pretrain_checkpoint.pt
      - metadata.enabled=false
      - runtime.device=cuda
      - runtime.seed={seed}
      - run.code=B-URG-DS
      - run.hparams_tag=pl{patch_len}
      - run.id={id}
    sweep:
      variant: [P1, P2, P3, P4]
      patch_len: [16]
      seed: [0]

ops: []
cmps: []
aggs: []
